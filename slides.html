<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>slides â€“ software.carpintery.shell.nestor.github.io</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dde8d7229bfee0f8bb5efd37f0f9ae1e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">software.carpintery.shell.nestor.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introducing-the-shell" id="toc-introducing-the-shell" class="nav-link active" data-scroll-target="#introducing-the-shell">Introducing the Shell</a></li>
  <li><a href="#navigating-files-and-directories" id="toc-navigating-files-and-directories" class="nav-link" data-scroll-target="#navigating-files-and-directories">Navigating Files and Directories</a>
  <ul class="collapse">
  <li><a href="#exploring-more-ls-options" id="toc-exploring-more-ls-options" class="nav-link" data-scroll-target="#exploring-more-ls-options">Exploring More <code>ls</code> Options</a></li>
  <li><a href="#listing-in-reverse-chronological-order" id="toc-listing-in-reverse-chronological-order" class="nav-link" data-scroll-target="#listing-in-reverse-chronological-order">Listing in Reverse Chronological Order</a></li>
  <li><a href="#absolute-vs-relative-paths" id="toc-absolute-vs-relative-paths" class="nav-link" data-scroll-target="#absolute-vs-relative-paths">Absolute vs Relative Paths</a></li>
  <li><a href="#relative-path-resolution" id="toc-relative-path-resolution" class="nav-link" data-scroll-target="#relative-path-resolution">Relative Path Resolution</a></li>
  <li><a href="#ls-reading-comprehension" id="toc-ls-reading-comprehension" class="nav-link" data-scroll-target="#ls-reading-comprehension"><code>ls</code> Reading Comprehension</a></li>
  </ul></li>
  <li><a href="#working-with-files-and-directories" id="toc-working-with-files-and-directories" class="nav-link" data-scroll-target="#working-with-files-and-directories">Working With Files and Directories</a>
  <ul class="collapse">
  <li><a href="#creating-files-a-different-way" id="toc-creating-files-a-different-way" class="nav-link" data-scroll-target="#creating-files-a-different-way">Creating Files a Different Way</a></li>
  <li><a href="#moving-files-to-a-new-folder" id="toc-moving-files-to-a-new-folder" class="nav-link" data-scroll-target="#moving-files-to-a-new-folder">Moving Files to a new folder</a></li>
  <li><a href="#renaming-files" id="toc-renaming-files" class="nav-link" data-scroll-target="#renaming-files">Renaming Files</a></li>
  <li><a href="#moving-and-copying" id="toc-moving-and-copying" class="nav-link" data-scroll-target="#moving-and-copying">Moving and Copying</a></li>
  <li><a href="#using-rm-safely" id="toc-using-rm-safely" class="nav-link" data-scroll-target="#using-rm-safely">Using <code>rm</code> Safely</a></li>
  <li><a href="#copy-with-multiple-filenames" id="toc-copy-with-multiple-filenames" class="nav-link" data-scroll-target="#copy-with-multiple-filenames">Copy with Multiple Filenames</a></li>
  <li><a href="#list-filenames-matching-a-pattern" id="toc-list-filenames-matching-a-pattern" class="nav-link" data-scroll-target="#list-filenames-matching-a-pattern">List filenames matching a pattern</a></li>
  <li><a href="#more-on-wildcards" id="toc-more-on-wildcards" class="nav-link" data-scroll-target="#more-on-wildcards">More on Wildcards</a></li>
  <li><a href="#organizing-directories-and-files" id="toc-organizing-directories-and-files" class="nav-link" data-scroll-target="#organizing-directories-and-files">Organizing Directories and Files</a></li>
  <li><a href="#reproduce-a-folder-structure" id="toc-reproduce-a-folder-structure" class="nav-link" data-scroll-target="#reproduce-a-folder-structure">Reproduce a folder structure</a></li>
  </ul></li>
  <li><a href="#pipes-and-filters" id="toc-pipes-and-filters" class="nav-link" data-scroll-target="#pipes-and-filters">Pipes and Filters</a>
  <ul class="collapse">
  <li><a href="#what-does-sort--n-do" id="toc-what-does-sort--n-do" class="nav-link" data-scroll-target="#what-does-sort--n-do">What Does <code>sort -n</code> Do?</a></li>
  <li><a href="#what-does-mean" id="toc-what-does-mean" class="nav-link" data-scroll-target="#what-does-mean">What Does <code>&gt;&gt;</code> Mean?</a></li>
  <li><a href="#appending-data" id="toc-appending-data" class="nav-link" data-scroll-target="#appending-data">Appending Data</a></li>
  <li><a href="#piping-commands-together" id="toc-piping-commands-together" class="nav-link" data-scroll-target="#piping-commands-together">Piping Commands Together</a></li>
  <li><a href="#pipe-reading-comprehension" id="toc-pipe-reading-comprehension" class="nav-link" data-scroll-target="#pipe-reading-comprehension">Pipe Reading Comprehension</a></li>
  <li><a href="#pipe-construction" id="toc-pipe-construction" class="nav-link" data-scroll-target="#pipe-construction">Pipe Construction</a></li>
  <li><a href="#which-pipe" id="toc-which-pipe" class="nav-link" data-scroll-target="#which-pipe">Which Pipe?</a></li>
  <li><a href="#removing-unneeded-files" id="toc-removing-unneeded-files" class="nav-link" data-scroll-target="#removing-unneeded-files">Removing Unneeded Files</a></li>
  </ul></li>
  <li><a href="#loops" id="toc-loops" class="nav-link" data-scroll-target="#loops">Loops</a>
  <ul class="collapse">
  <li><a href="#write-your-own-loop" id="toc-write-your-own-loop" class="nav-link" data-scroll-target="#write-your-own-loop">Write your own loop</a></li>
  <li><a href="#variables-in-loops" id="toc-variables-in-loops" class="nav-link" data-scroll-target="#variables-in-loops">Variables in Loops</a></li>
  <li><a href="#limiting-sets-of-files" id="toc-limiting-sets-of-files" class="nav-link" data-scroll-target="#limiting-sets-of-files">Limiting Sets of Files</a></li>
  <li><a href="#doing-a-dry-run" id="toc-doing-a-dry-run" class="nav-link" data-scroll-target="#doing-a-dry-run">Doing a Dry Run</a></li>
  <li><a href="#nested-loops" id="toc-nested-loops" class="nav-link" data-scroll-target="#nested-loops">Nested Loops</a></li>
  </ul></li>
  <li><a href="#shell-scripts" id="toc-shell-scripts" class="nav-link" data-scroll-target="#shell-scripts">Shell Scripts</a>
  <ul class="collapse">
  <li><a href="#list-unique-species" id="toc-list-unique-species" class="nav-link" data-scroll-target="#list-unique-species">List Unique Species</a></li>
  <li><a href="#why-record-commands-in-the-history-before-running-them" id="toc-why-record-commands-in-the-history-before-running-them" class="nav-link" data-scroll-target="#why-record-commands-in-the-history-before-running-them">Why Record Commands in the History Before Running Them?</a></li>
  <li><a href="#variables-in-shell-scripts" id="toc-variables-in-shell-scripts" class="nav-link" data-scroll-target="#variables-in-shell-scripts">Variables in Shell Scripts</a></li>
  <li><a href="#find-the-longest-file-with-a-given-extension" id="toc-find-the-longest-file-with-a-given-extension" class="nav-link" data-scroll-target="#find-the-longest-file-with-a-given-extension">Find the Longest File With a Given Extension</a></li>
  <li><a href="#script-reading-comprehension" id="toc-script-reading-comprehension" class="nav-link" data-scroll-target="#script-reading-comprehension">Script Reading Comprehension</a></li>
  <li><a href="#debugging-scripts" id="toc-debugging-scripts" class="nav-link" data-scroll-target="#debugging-scripts">Debugging Scripts</a></li>
  </ul></li>
  <li><a href="#finding-things" id="toc-finding-things" class="nav-link" data-scroll-target="#finding-things">Finding Things</a>
  <ul class="collapse">
  <li><a href="#using-grep" id="toc-using-grep" class="nav-link" data-scroll-target="#using-grep">Using <code>grep</code></a></li>
  <li><a href="#tracking-a-species" id="toc-tracking-a-species" class="nav-link" data-scroll-target="#tracking-a-species">Tracking a Species</a></li>
  <li><a href="#little-women" id="toc-little-women" class="nav-link" data-scroll-target="#little-women">Little Women</a></li>
  <li><a href="#matching-and-subtracting" id="toc-matching-and-subtracting" class="nav-link" data-scroll-target="#matching-and-subtracting">Matching and Subtracting</a></li>
  <li><a href="#find-pipeline-reading-comprehension" id="toc-find-pipeline-reading-comprehension" class="nav-link" data-scroll-target="#find-pipeline-reading-comprehension"><code>find</code> Pipeline Reading Comprehension</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="introducing-the-shell" class="level1">
<h1>Introducing the Shell</h1>
<hr>
</section>
<section id="navigating-files-and-directories" class="level1">
<h1>Navigating Files and Directories</h1>
<hr>
<p><img src="fig/filesystem.svg" class="img-fluid" alt="The file system is made up of a root directory that contains sub-directories titled bin, data, users, and tmp"></p>
<hr>
<p><img src="fig/home-directories.svg" class="img-fluid" alt="Like other directories, home directories are sub-directories underneath &quot;/Users&quot; like &quot;/Users/imhotep&quot;, &quot;/Users/larry&quot; or&quot;/Users/nelle&quot;"></p>
<hr>
<p><img src="fig/filesystem-challenge.svg" class="img-fluid" alt="A directory tree below the Users directory where &quot;/Users&quot; contains the directories &quot;backup&quot; and &quot;thing&quot;; &quot;/Users/backup&quot; contains &quot;original&quot;,&quot;pnas_final&quot; and &quot;pnas_sub&quot;; &quot;/Users/thing&quot; contains &quot;backup&quot;; and&quot;/Users/thing/backup&quot; contains &quot;2012-12-01&quot;, &quot;2013-01-08&quot; and&quot;2013-01-27&quot;"></p>
<hr>
<p><img src="fig/filesystem-challenge.svg" class="img-fluid" alt="A directory tree below the Users directory where &quot;/Users&quot; contains the directories &quot;backup&quot; and &quot;thing&quot;; &quot;/Users/backup&quot; contains &quot;original&quot;,&quot;pnas_final&quot; and &quot;pnas_sub&quot;; &quot;/Users/thing&quot; contains &quot;backup&quot;; and&quot;/Users/thing/backup&quot; contains &quot;2012-12-01&quot;, &quot;2013-01-08&quot; and&quot;2013-01-27&quot;"></p>
<hr>
<p><img src="fig/shell_command_syntax.svg" class="img-fluid" alt="General syntax of a shell command"></p>
<hr>
<section id="exploring-more-ls-options" class="level2 challenge">
<h2 class="anchored" data-anchor-id="exploring-more-ls-options">Exploring More <code>ls</code> Options</h2>
<p>You can also use two options at the same time. What does the command <code>ls</code> do when used with the <code>-l</code> option? What about if you use both the <code>-l</code> and the <code>-h</code> option?</p>
<p>Some of its output is about properties that we do not cover in this lesson (such as file permissions and ownership), but the rest should be useful nevertheless.</p>
</section>
<hr>
<section id="listing-in-reverse-chronological-order" class="level2 challenge">
<h2 class="anchored" data-anchor-id="listing-in-reverse-chronological-order">Listing in Reverse Chronological Order</h2>
<p>By default, <code>ls</code> lists the contents of a directory in alphabetical order by name. The command <code>ls -t</code> lists items by time of last change instead of alphabetically. The command <code>ls -r</code> lists the contents of a directory in reverse order. Which file is displayed last when you combine the <code>-t</code> and <code>-r</code> options? Hint: You may need to use the <code>-l</code> option to see the last changed dates.</p>
</section>
<hr>
<section id="absolute-vs-relative-paths" class="level2 challenge">
<h2 class="anchored" data-anchor-id="absolute-vs-relative-paths">Absolute vs Relative Paths</h2>
<p>Starting from <code>/Users/nelle/data</code>, which of the following commands could Nelle use to navigate to her home directory, which is <code>/Users/nelle</code>?</p>
<ol type="1">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/nelle</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</section>
<hr>
<section id="relative-path-resolution" class="level2 challenge">
<h2 class="anchored" data-anchor-id="relative-path-resolution">Relative Path Resolution</h2>
<p>Using the filesystem diagram below, if <code>pwd</code> displays <code>/Users/thing</code>, what will <code>ls -F ../backup</code> display?</p>
<ol type="1">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<p><img src="fig/filesystem-challenge.svg" class="img-fluid" alt="A directory tree below the Users directory where &quot;/Users&quot; contains the directories &quot;backup&quot; and &quot;thing&quot;; &quot;/Users/backup&quot; contains &quot;original&quot;,&quot;pnas_final&quot; and &quot;pnas_sub&quot;; &quot;/Users/thing&quot; contains &quot;backup&quot;; and&quot;/Users/thing/backup&quot; contains &quot;2012-12-01&quot;, &quot;2013-01-08&quot; and&quot;2013-01-27&quot;"></p>
</section>
<hr>
<section id="ls-reading-comprehension" class="level2 challenge">
<h2 class="anchored" data-anchor-id="ls-reading-comprehension"><code>ls</code> Reading Comprehension</h2>
<p>Using the filesystem diagram below, if <code>pwd</code> displays <code>/Users/backup</code>, and <code>-r</code> tells <code>ls</code> to display things in reverse order, what command(s) will result in the following output:</p>
<pre class="output"><code>pnas_sub/ pnas_final/ original/</code></pre>
<p><img src="fig/filesystem-challenge.svg" class="img-fluid" alt="A directory tree below the Users directory where &quot;/Users&quot; contains the directories &quot;backup&quot; and &quot;thing&quot;; &quot;/Users/backup&quot; contains &quot;original&quot;,&quot;pnas_final&quot; and &quot;pnas_sub&quot;; &quot;/Users/thing&quot; contains &quot;backup&quot;; and&quot;/Users/thing/backup&quot; contains &quot;2012-12-01&quot;, &quot;2013-01-08&quot; and&quot;2013-01-27&quot;"></p>
<ol type="1">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
</ol>
</section>
<hr>
</section>
<section id="working-with-files-and-directories" class="level1">
<h1>Working With Files and Directories</h1>
<hr>
<p><img src="fig/nano-screenshot.png" class="img-fluid" alt="screenshot of nano text editor in action with the text It's not publish or perish any more, it's share and thrive"></p>
<hr>
<section id="creating-files-a-different-way" class="level2 challenge">
<h2 class="anchored" data-anchor-id="creating-files-a-different-way">Creating Files a Different Way</h2>
<p>We have seen how to create text files using the <code>nano</code> editor. Now, try the following command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> touch my_file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li><p>What did the <code>touch</code> command do? When you look at your current directory using the GUI file explorer, does the file show up?</p></li>
<li><p>Use <code>ls -l</code> to inspect the files. How large is <code>my_file.txt</code>?</p></li>
<li><p>When might you want to create a file this way?</p></li>
</ol>
<p>To avoid confusion later on, we suggest removing the file youâ€™ve just created before proceeding with the rest of the episode, otherwise future outputs may vary from those given in the lesson. To do this, use the following command:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm my_file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="moving-files-to-a-new-folder" class="level2 challenge">
<h2 class="anchored" data-anchor-id="moving-files-to-a-new-folder">Moving Files to a new folder</h2>
<p>After running the following commands, Jamie realizes that she put the files <code>sucrose.dat</code> and <code>maltose.dat</code> into the wrong folder. The files should have been placed in the <code>raw</code> folder.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">analyzed/</span> raw/</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> analyzed</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">fructose.dat</span> glucose.dat maltose.dat sucrose.dat</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd analyzed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Fill in the blanks to move these files to the <code>raw/</code> folder (i.e.&nbsp;the one she forgot to put them in)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv sucrose.dat maltose.dat ____/____</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="renaming-files" class="level2 challenge">
<h2 class="anchored" data-anchor-id="renaming-files">Renaming Files</h2>
<p>Suppose that you created a plain-text file in your current directory to contain a list of the statistical tests you will need to do to analyze your data, and named it <code>statstics.txt</code></p>
<p>After creating and saving this file you realize you misspelled the filename! You want to correct the mistake, which of the following commands could you use to do so?</p>
<ol type="1">
<li><code>cp statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt .</code></li>
<li><code>cp statstics.txt .</code></li>
</ol>
</section>
<hr>
<section id="moving-and-copying" class="level2 challenge">
<h2 class="anchored" data-anchor-id="moving-and-copying">Moving and Copying</h2>
<p>What is the output of the closing <code>ls</code> command in the sequence shown below?</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>/Users/jamie/data</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>proteins.dat</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir recombined</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv proteins.dat recombined/</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp recombined/proteins.dat ../proteins-saved.dat</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li><code>proteins-saved.dat recombined</code></li>
<li><code>recombined</code></li>
<li><code>proteins.dat recombined</code></li>
<li><code>proteins-saved.dat</code></li>
</ol>
</section>
<hr>
<section id="using-rm-safely" class="level2 challenge">
<h2 class="anchored" data-anchor-id="using-rm-safely">Using <code>rm</code> Safely</h2>
<p>What happens when we execute <code>rm -i thesis_backup/quotations.txt</code>? Why would we want this protection when using <code>rm</code>?</p>
</section>
<hr>
<section id="copy-with-multiple-filenames" class="level2 challenge">
<h2 class="anchored" data-anchor-id="copy-with-multiple-filenames">Copy with Multiple Filenames</h2>
<p>For this exercise, you can test the commands in the <code>shell-lesson-data/exercise-data</code> directory.</p>
<p>In the example below, what does <code>cp</code> do when given several filenames and a directory name?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir backup</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp creatures/minotaur.dat creatures/unicorn.dat backup/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the example below, what does <code>cp</code> do when given three or more file names?</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd creatures</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>basilisk.dat  minotaur.dat  unicorn.dat</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp minotaur.dat unicorn.dat basilisk.dat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="list-filenames-matching-a-pattern" class="level2 challenge">
<h2 class="anchored" data-anchor-id="list-filenames-matching-a-pattern">List filenames matching a pattern</h2>
<p>When run in the <code>alkanes</code> directory, which <code>ls</code> command(s) will produce this output?</p>
<p><code>ethane.pdb   methane.pdb</code></p>
<ol type="1">
<li><code>ls *t*ane.pdb</code></li>
<li><code>ls *t?ne.*</code></li>
<li><code>ls *t??ne.pdb</code></li>
<li><code>ls ethane.*</code></li>
</ol>
</section>
<hr>
<section id="more-on-wildcards" class="level2 challenge">
<h2 class="anchored" data-anchor-id="more-on-wildcards">More on Wildcards</h2>
<p>Sam has a directory containing calibration data, datasets, and descriptions of the datasets:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-calibration.txt</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset1.txt</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset2.txt</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-calibration.txt</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset1.txt</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset2.txt</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-calibration.txt</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset1.txt</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset2.txt</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> backup</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ calibration</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â””â”€â”€ datasets</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="ex">â””â”€â”€</span> send_to_bob</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”œâ”€â”€</span> all_datasets_created_on_a_23rd</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â””â”€â”€</span> all_november_files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Before heading off to another field trip, she wants to back up her data and send some datasets to her colleague Bob. Sam uses the following commands to get the job done:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>dataset<span class="pp">*</span> backup/datasets</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp ____calibration____ backup/calibration</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp 2015-____-____ send_to_bob/all_november_files/</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp ____ send_to_bob/all_datasets_created_on_a_23rd/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Help Sam by filling in the blanks.</p>
<p>The resulting directory structure should look like this</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-calibration.txt</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset1.txt</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset2.txt</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-calibration.txt</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset1.txt</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset2.txt</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-calibration.txt</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset1.txt</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset2.txt</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> backup</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ calibration</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â”‚&nbsp;&nbsp; â”œâ”€â”€ 2015-10-23-calibration.txt</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â”‚&nbsp;&nbsp; â”œâ”€â”€ 2015-10-26-calibration.txt</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â”‚&nbsp;&nbsp; â””â”€â”€ 2015-11-23-calibration.txt</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span> â””â”€â”€ datasets</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-23-dataset1.txt</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-23-dataset2.txt</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-23-dataset_overview.txt</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-26-dataset1.txt</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-26-dataset2.txt</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-10-26-dataset_overview.txt</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-11-23-dataset1.txt</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â”œâ”€â”€ 2015-11-23-dataset2.txt</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="ex">â”‚&nbsp;&nbsp;</span>     â””â”€â”€ 2015-11-23-dataset_overview.txt</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="ex">â””â”€â”€</span> send_to_bob</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”œâ”€â”€</span> all_datasets_created_on_a_23rd</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ 2015-10-23-dataset1.txt</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ 2015-10-23-dataset2.txt</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ 2015-10-23-dataset_overview.txt</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ 2015-11-23-dataset1.txt</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â”œâ”€â”€ 2015-11-23-dataset2.txt</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â”‚&nbsp;&nbsp;</span> â””â”€â”€ 2015-11-23-dataset_overview.txt</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="ex">â””â”€â”€</span> all_november_files</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>        <span class="ex">â”œâ”€â”€</span> 2015-11-23-calibration.txt</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>        <span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset1.txt</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>        <span class="ex">â”œâ”€â”€</span> 2015-11-23-dataset2.txt</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>        <span class="ex">â””â”€â”€</span> 2015-11-23-dataset_overview.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="organizing-directories-and-files" class="level2 challenge">
<h2 class="anchored" data-anchor-id="organizing-directories-and-files">Organizing Directories and Files</h2>
<p>Jamie is working on a project, and she sees that her files arenâ€™t very well organized:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>analyzed/  fructose.dat    raw/   sucrose.dat</code></pre>
<p>The <code>fructose.dat</code> and <code>sucrose.dat</code> files contain output from her data analysis. What command(s) covered in this lesson does she need to run so that the commands below will produce the output shown?</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>analyzed/   raw/</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls analyzed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>fructose.dat    sucrose.dat</code></pre>
</section>
<hr>
<section id="reproduce-a-folder-structure" class="level2 challenge">
<h2 class="anchored" data-anchor-id="reproduce-a-folder-structure">Reproduce a folder structure</h2>
<p>Youâ€™re starting a new experiment and would like to duplicate the directory structure from your previous experiment so you can add new data.</p>
<p>Assume that the previous experiment is in a folder called <code>2016-05-18</code>, which contains a <code>data</code> folder that in turn contains folders named <code>raw</code> and <code>processed</code> that contain data files. The goal is to copy the folder structure of the <code>2016-05-18</code> folder into a folder called <code>2016-05-20</code> so that your final directory structure looks like this:</p>
<pre class="output"><code>2016-05-20/
â””â”€â”€ data
   â”œâ”€â”€ processed
   â””â”€â”€ raw</code></pre>
<p>Which of the following set of commands would achieve this objective? What would the other commands do?</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/raw</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/processed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
</section>
<section id="pipes-and-filters" class="level1">
<h1>Pipes and Filters</h1>
<hr>
<p><img src="fig/redirects-and-pipes.svg" class="img-fluid" alt="Redirects and Pipes of different commands: &quot;wc -l *.pdb&quot; will direct theoutput to the shell. &quot;wc -l *.pdb > lengths&quot; will direct output to the file&quot;lengths&quot;. &quot;wc -l *.pdb | sort -n | head -n 1&quot; will build a pipeline where theoutput of the &quot;wc&quot; command is the input to the &quot;sort&quot; command, the output ofthe &quot;sort&quot; command is the input to the &quot;head&quot; command and the output of the&quot;head&quot; command is directed to the shell"></p>
<hr>
<section id="what-does-sort--n-do" class="level2 challenge">
<h2 class="anchored" data-anchor-id="what-does-sort--n-do">What Does <code>sort -n</code> Do?</h2>
<p>The file <code>shell-lesson-data/exercise-data/numbers.txt</code> contains the following lines:</p>
<pre class="source"><code>10
2
19
22
6</code></pre>
<p>If we run <code>sort</code> on this file, the output is:</p>
<pre class="output"><code>10
19
2
22
6</code></pre>
<p>If we run <code>sort -n</code> on the same file, we get this instead:</p>
<pre class="output"><code>2
6
10
19
22</code></pre>
<p>Explain why <code>-n</code> has this effect.</p>
</section>
<hr>
<section id="what-does-mean" class="level2 challenge">
<h2 class="anchored" data-anchor-id="what-does-mean">What Does <code>&gt;&gt;</code> Mean?</h2>
<p>We have seen the use of <code>&gt;</code>, but there is a similar operator <code>&gt;&gt;</code> which works slightly differently. Weâ€™ll learn about the differences between these two operators by printing some strings. We can use the <code>echo</code> command to print strings e.g.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo The echo command prints text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="output"><code>The echo command prints text</code></pre>
<p>Now test the commands below to reveal the difference between the two operators:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;</span> testfile01.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;&gt;</span> testfile02.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Hint: Try executing each command twice in a row and then examining the output files.</p>
</section>
<hr>
<section id="appending-data" class="level2 challenge">
<h2 class="anchored" data-anchor-id="appending-data">Appending Data</h2>
<p>We have already met the <code>head</code> command, which prints lines from the start of a file. <code>tail</code> is similar, but prints lines from the end of a file instead.</p>
<p>Consider the file <code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>. After these commands, select the answer that corresponds to the file <code>animals-subset.csv</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 animals.csv <span class="op">&gt;</span> animals-subset.csv</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 2 animals.csv <span class="op">&gt;&gt;</span> animals-subset.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li>The first three lines of <code>animals.csv</code></li>
<li>The last two lines of <code>animals.csv</code></li>
<li>The first three lines and the last two lines of <code>animals.csv</code></li>
<li>The second and third lines of <code>animals.csv</code></li>
</ol>
</section>
<hr>
<section id="piping-commands-together" class="level2 challenge">
<h2 class="anchored" data-anchor-id="piping-commands-together">Piping Commands Together</h2>
<p>In our current directory, we want to find the 3 files which have the least number of lines. Which command listed below would work?</p>
<ol type="1">
<li><code>wc -l * &gt; sort -n &gt; head -n 3</code></li>
<li><code>wc -l * | sort -n | head -n 1-3</code></li>
<li><code>wc -l * | head -n 3 | sort -n</code></li>
<li><code>wc -l * | sort -n | head -n 3</code></li>
</ol>
</section>
<hr>
<section id="pipe-reading-comprehension" class="level2 challenge">
<h2 class="anchored" data-anchor-id="pipe-reading-comprehension">Pipe Reading Comprehension</h2>
<p>A file called <code>animals.csv</code> (in the <code>shell-lesson-data/exercise-data/animal-counts</code> folder) contains the following data:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>What text passes through each of the pipes and the final redirect in the pipeline below? Note, the <code>sort -r</code> command sorts in reverse order.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat animals.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5 <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 3 <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-r</span> <span class="op">&gt;</span> final.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Hint: build the pipeline up one command at a time to test your understanding</p>
</section>
<hr>
<section id="pipe-construction" class="level2 challenge">
<h2 class="anchored" data-anchor-id="pipe-construction">Pipe Construction</h2>
<p>For the file <code>animals.csv</code> from the previous exercise, consider the following command:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>cut</code> command is used to remove or â€˜cut outâ€™ certain sections of each line in the file, and <code>cut</code> expects the lines to be separated into columns by a <kbd>Tab</kbd> character. A character used in this way is called a <strong>delimiter</strong>. In the example above we use the <code>-d</code> option to specify the comma as our delimiter character. We have also used the <code>-f</code> option to specify that we want to extract the second field (column). This gives the following output:</p>
<pre class="output"><code>deer
rabbit
raccoon
rabbit
deer
fox
rabbit
bear</code></pre>
<p>The <code>uniq</code> command filters out adjacent matching lines in a file. How could you extend this pipeline (using <code>uniq</code> and another command) to find out what animals the file contains (without any duplicates in their names)?</p>
</section>
<hr>
<section id="which-pipe" class="level2 challenge">
<h2 class="anchored" data-anchor-id="which-pipe">Which Pipe?</h2>
<p>The file <code>animals.csv</code> contains 8 lines of data formatted as follows:</p>
<pre class="output"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
...</code></pre>
<p>The <code>uniq</code> command has a <code>-c</code> option which gives a count of the number of times a line occurs in its input. Assuming your current directory is <code>shell-lesson-data/exercise-data/animal-counts</code>, what command would you use to produce a table that shows the total count of each type of animal in the file?</p>
<ol type="1">
<li><code>sort animals.csv | uniq -c</code></li>
<li><code>sort -t, -k2,2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c | wc -l</code></li>
</ol>
</section>
<hr>
<section id="removing-unneeded-files" class="level2 challenge">
<h2 class="anchored" data-anchor-id="removing-unneeded-files">Removing Unneeded Files</h2>
<p>Suppose you want to delete your processed data files, and only keep your raw files and processing script to save storage. The raw files end in <code>.dat</code> and the processed files end in <code>.txt</code>. Which of the following would remove all the processed data files, and <em>only</em> the processed data files?</p>
<ol type="1">
<li><code>rm ?.txt</code></li>
<li><code>rm *.txt</code></li>
<li><code>rm * .txt</code></li>
<li><code>rm *.*</code></li>
</ol>
</section>
<hr>
</section>
<section id="loops" class="level1">
<h1>Loops</h1>
<hr>
<p><img src="fig/shell_script_for_loop_flow_chart.svg" class="img-fluid" alt="The for loop &quot;for filename in .dat; do echo cp $filename original-$filename;done&quot; will successively assign the names of all &quot;.dat&quot; files in your currentdirectory to the variable &quot;$filename&quot; and then execute the command. With thefiles &quot;basilisk.dat&quot;, &quot;minotaur.dat&quot; and &quot;unicorn.dat&quot; in the current directorythe loop will successively call the echo command three times and print threelines: &quot;cp basislisk.dat original-basilisk.dat&quot;, then &quot;cp minotaur.datoriginal-minotaur.dat&quot; and finally &quot;cp unicorn.datoriginal-unicorn.dat&quot;"></p>
<hr>
<section id="write-your-own-loop" class="level2 challenge">
<h2 class="anchored" data-anchor-id="write-your-own-loop">Write your own loop</h2>
<p>How would you write a loop that echoes all 10 numbers from 0 to 9?</p>
</section>
<hr>
<section id="variables-in-loops" class="level2 challenge">
<h2 class="anchored" data-anchor-id="variables-in-loops">Variables in Loops</h2>
<p>This exercise refers to the <code>shell-lesson-data/exercise-data/alkanes</code> directory. <code>ls *.pdb</code> gives the following output:</p>
<pre class="output"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
<p>What is the output of the following code?</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, what is the output of the following code?</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Why do these two loops give different outputs?</p>
</section>
<hr>
<section id="limiting-sets-of-files" class="level2 challenge">
<h2 class="anchored" data-anchor-id="limiting-sets-of-files">Limiting Sets of Files</h2>
<p>What would be the output of running the following loop in the <code>shell-lesson-data/exercise-data/alkanes</code> directory?</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li>No files are listed.</li>
<li>All files are listed.</li>
<li>Only <code>cubane.pdb</code>, <code>octane.pdb</code> and <code>pentane.pdb</code> are listed.</li>
<li>Only <code>cubane.pdb</code> is listed.</li>
</ol>
<p>How would the output differ from using this command instead?</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li>The same files would be listed.</li>
<li>All the files are listed this time.</li>
<li>No files are listed this time.</li>
<li>The files <code>cubane.pdb</code> and <code>octane.pdb</code> will be listed.</li>
<li>Only the file <code>octane.pdb</code> will be listed.</li>
</ol>
</section>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td style="text-align: left;">https://swcarpentry.github.io/shell-novice/06-script.html</td>
</tr>
</tbody>
</table>
<section id="doing-a-dry-run" class="level2 challenge">
<h2 class="anchored" data-anchor-id="doing-a-dry-run">Doing a Dry Run</h2>
<p>A loop is a way to do many things at once â€” or to make many mistakes at once if it does the wrong thing. One way to check what a loop <em>would</em> do is to <code>echo</code> the commands it would run instead of actually running them.</p>
<p>Suppose we want to preview the commands the following loop will execute without actually running those commands:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What is the difference between the two loops below, and which one would we want to run?</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"cat </span><span class="va">$datafile</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="nested-loops" class="level2 challenge">
<h2 class="anchored" data-anchor-id="nested-loops">Nested Loops</h2>
<p>Suppose we want to set up a directory structure to organize some experiments measuring reaction rate constants with different compounds <em>and</em> different temperatures. What would be the result of the following code:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
</section>
<section id="shell-scripts" class="level1">
<h1>Shell Scripts</h1>
<hr>
<section id="list-unique-species" class="level2 challenge">
<h2 class="anchored" data-anchor-id="list-unique-species">List Unique Species</h2>
<p>Leah has several hundred data files, each of which is formatted like this:</p>
<pre class="source"><code>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2
2013-11-06,fox,1
2013-11-07,rabbit,18
2013-11-07,bear,1</code></pre>
<p>An example of this type of file is given in <code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.</p>
<p>We can use the command <code>cut -d , -f 2 animals.csv | sort | uniq</code> to produce the unique species in <code>animals.csv</code>. In order to avoid having to type out this series of commands every time, a scientist may choose to write a shell script instead.</p>
<p>Write a shell script called <code>species.sh</code> that takes any number of filenames as command-line arguments and uses a variation of the above command to print a list of the unique species appearing in each of those files separately.</p>
</section>
<hr>
<section id="why-record-commands-in-the-history-before-running-them" class="level2 challenge">
<h2 class="anchored" data-anchor-id="why-record-commands-in-the-history-before-running-them">Why Record Commands in the History Before Running Them?</h2>
<p>If you run the command:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> recent.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>the last command in the file is the <code>history</code> command itself, i.e., the shell has added <code>history</code> to the command log before actually running it. In fact, the shell <em>always</em> adds commands to the log before running them. Why do you think it does this?</p>
</section>
<hr>
<section id="variables-in-shell-scripts" class="level2 challenge">
<h2 class="anchored" data-anchor-id="variables-in-shell-scripts">Variables in Shell Scripts</h2>
<p>In the <code>alkanes</code> directory, imagine you have a shell script called <code>script.sh</code> containing the following commands:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="va">$2</span> <span class="va">$1</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> <span class="va">$3</span> <span class="va">$1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>While you are in the <code>alkanes</code> directory, you type the following command:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash script.sh <span class="st">'*.pdb'</span> 1 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Which of the following outputs would you expect to see?</p>
<ol type="1">
<li>All of the lines between the first and the last lines of each file ending in <code>.pdb</code> in the <code>alkanes</code> directory</li>
<li>The first and the last line of each file ending in <code>.pdb</code> in the <code>alkanes</code> directory</li>
<li>The first and the last line of each file in the <code>alkanes</code> directory</li>
<li>An error because of the quotes around <code>*.pdb</code></li>
</ol>
</section>
<hr>
<section id="find-the-longest-file-with-a-given-extension" class="level2 challenge">
<h2 class="anchored" data-anchor-id="find-the-longest-file-with-a-given-extension">Find the Longest File With a Given Extension</h2>
<p>Write a shell script called <code>longest.sh</code> that takes the name of a directory and a filename extension as its arguments, and prints out the name of the file with the most lines in that directory with that extension. For example:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/alkanes pdb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>would print the name of the <code>.pdb</code> file in <code>shell-lesson-data/exercise-data/alkanes</code> that has the most lines.</p>
<p>Feel free to test your script on another directory e.g.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/writing txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="script-reading-comprehension" class="level2 challenge">
<h2 class="anchored" data-anchor-id="script-reading-comprehension">Script Reading Comprehension</h2>
<p>For this question, consider the <code>shell-lesson-data/exercise-data/alkanes</code> directory once again. This contains a number of <code>.pdb</code> files in addition to any other files you may have created. Explain what each of the following three scripts would do when run as <code>bash script1.sh *.pdb</code>, <code>bash script2.sh *.pdb</code>, and <code>bash script3.sh *.pdb</code> respectively.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 1</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">*</span>.<span class="pp">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 2</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="va">$1</span> <span class="va">$2</span> <span class="va">$3</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$filename</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 3</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$@</span>.pdb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>
<section id="debugging-scripts" class="level2 challenge">
<h2 class="anchored" data-anchor-id="debugging-scripts">Debugging Scripts</h2>
<p>Suppose you have saved the following script in a file called <code>do-errors.sh</code> in Nelleâ€™s <code>north-pacific-gyre</code> directory:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for data files.</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datfile</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When you run it from the <code>north-pacific-gyre</code> directory:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>the output is blank. To figure out why, re-run the script using the <code>-x</code> option:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash <span class="at">-x</span> do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What is the output showing you? Which line is responsible for the error?</p>
</section>
<hr>
</section>
<section id="finding-things" class="level1">
<h1>Finding Things</h1>
<hr>
<section id="using-grep" class="level2 challenge">
<h2 class="anchored" data-anchor-id="using-grep">Using <code>grep</code></h2>
<p>Which command would result in the following output:</p>
<pre class="output"><code>and the presence of absence:</code></pre>
<ol type="1">
<li><code>grep "of" haiku.txt</code></li>
<li><code>grep -E "of" haiku.txt</code></li>
<li><code>grep -w "of" haiku.txt</code></li>
<li><code>grep -i "of" haiku.txt</code></li>
</ol>
</section>
<hr>
<section id="tracking-a-species" class="level2 challenge">
<h2 class="anchored" data-anchor-id="tracking-a-species">Tracking a Species</h2>
<p>Leah has several hundred data files saved in one directory, each of which is formatted like this:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>She wants to write a shell script that takes a species as the first command-line argument and a directory as the second argument. The script should return one file called <code>&lt;species&gt;.txt</code> containing a list of dates and the number of that species seen on each date. For example using the data shown above, <code>rabbit.txt</code> would contain:</p>
<pre class="source"><code>2012-11-05,22
2012-11-06,19
2012-11-07,16</code></pre>
<p>Below, each line contains an individual command, or pipe. Arrange their sequence in one command in order to achieve Leahâ€™s goal:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> : <span class="at">-f</span> 2</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-w</span> <span class="va">$1</span> <span class="at">-r</span> <span class="va">$2</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="va">$1</span><span class="ex">.txt</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 1,3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Hint: use <code>man grep</code> to look for how to grep text recursively in a directory and <code>man cut</code> to select more than one field in a line.</p>
<p>An example of such a file is provided in <code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code></p>
</section>
<hr>
<section id="little-women" class="level2 challenge">
<h2 class="anchored" data-anchor-id="little-women">Little Women</h2>
<p>You and your friend, having just finished reading <em>Little Women</em> by Louisa May Alcott, are in an argument. Of the four sisters in the book, Jo, Meg, Beth, and Amy, your friend thinks that Jo was the most mentioned. You, however, are certain it was Amy. Luckily, you have a file <code>LittleWomen.txt</code> containing the full text of the novel (<code>shell-lesson-data/exercise-data/writing/LittleWomen.txt</code>). Using a <code>for</code> loop, how would you tabulate the number of times each of the four sisters is mentioned?</p>
<p>Hint: one solution might employ the commands <code>grep</code> and <code>wc</code> and a <code>|</code>, while another might utilize <code>grep</code> options. There is often more than one way to solve a programming task, so a particular solution is usually chosen based on a combination of yielding the correct result, elegance, readability, and speed.</p>
</section>
<hr>
<section id="matching-and-subtracting" class="level2 challenge">
<h2 class="anchored" data-anchor-id="matching-and-subtracting">Matching and Subtracting</h2>
<p>The <code>-v</code> option to <code>grep</code> inverts pattern matching, so that only lines which do <em>not</em> match the pattern are printed. Given that, which of the following commands will find all .dat files in <code>creatures</code> except <code>unicorn.dat</code>? Once you have thought about your answer, you can test the commands in the <code>shell-lesson-data/exercise-data</code> directory.</p>
<ol type="1">
<li><code>find creatures -name "*.dat" | grep -v unicorn</code></li>
<li><code>find creatures -name *.dat | grep -v unicorn</code></li>
<li><code>grep -v "unicorn" $(find creatures -name "*.dat")</code></li>
<li>None of the above.</li>
</ol>
</section>
<hr>
<section id="find-pipeline-reading-comprehension" class="level2 challenge">
<h2 class="anchored" data-anchor-id="find-pipeline-reading-comprehension"><code>find</code> Pipeline Reading Comprehension</h2>
<p>Write a short explanatory comment for the following shell script:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.dat"</span><span class="va">)</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/leilaicruz\.github\.io\/2024-11-14-tudelft-utwente-bash\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>